{"remainingRequest":"D:\\项目\\movie\\vue-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\项目\\movie\\vue-app\\src\\views\\me\\Order.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\项目\\movie\\vue-app\\src\\views\\me\\Order.vue","mtime":1616080370000},{"path":"D:\\项目\\movie\\vue-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\项目\\movie\\vue-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge0ZpbmRPcmRlckJ5VXNlciwgUGF5Rm9yT3JkZXJ9IGZyb20gIkAvYXBpL29yZGVyIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiT3JkZXIiLA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBvcmRlckxpc3Q6IFtdLA0KICAgICAgcGF5T3JkZXJJZDogJycsDQogICAgfQ0KICB9LA0KDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5sb2FkT3JkZXIoKQ0KICB9LA0KDQogIG1ldGhvZHM6IHsNCg0KICAgIGxvYWRPcmRlcigpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUNCiAgICAgIEZpbmRPcmRlckJ5VXNlcihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidWlkIikpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5vcmRlckxpc3QgPSByZXMuZGF0YQ0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgIH0sIDcwMCkNCiAgICAgIH0pDQogICAgfSwNCg0KICAgIGhhbmRsZVBheShvcmRlciwgaW5kZXgpIHsNCiAgICAgIHRoaXMub3BlbihvcmRlciwgaW5kZXgpOw0KICAgIH0sDQoNCiAgICBvcGVuKG9yZGVyLCBpbmRleCkgew0KICAgICAgdGhpcy4kY29uZmlybSgn6K+35oKo5LuU57uG56Gu6K6k6K6i5Y2V6YeR6aKd5Li6JyArIG9yZGVyLnByaWNlICsgJ+WFgywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu6K6k5pSv5LuYJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iOaUr+S7mCcsDQogICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgY2VudGVyOiB0cnVlDQogICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQ0KICAgICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICAgIHRoaXMucGF5T3JkZXJJZCA9IG9yZGVyLmlkDQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywNCiAgICAgICAgICBtZXNzYWdlOiAn55So5oi35bey5Y+W5raI5pSv5LuYJw0KICAgICAgICB9KTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBzdWJtaXRQYXkoKSB7DQogICAgICBQYXlGb3JPcmRlcih0aGlzLnBheU9yZGVySWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5sb2FkT3JkZXIoKTsNCiAgICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5oGt5Zac5L2g5pSv5LuY5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9LA0KDQogIH0sDQoNCn0NCg=="},{"version":3,"sources":["Order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Order.vue","sourceRoot":"src/views/me","sourcesContent":["<template>\r\n  <div style=\"width: 100%\">\r\n    <h3 style=\"letter-spacing: 1px;font-weight: 400;padding-bottom: 20px\">我的订单</h3>\r\n\r\n    <div v-loading=\"loading\">\r\n      <el-card v-for=\"(item, index) in orderList\" :key=\"index\" class=\"box-card\">\r\n        <div>\r\n          <img class=\"item-film-img\" alt=\"\" :src=\"item.film.cover\"/>\r\n          <div style=\"float: left;\">\r\n            <div class=\"item-film-name\">《{{ item.film.name }}》</div>\r\n            <div class=\"item-film-seat\">订购座位 : {{ item.order.seats }}</div>\r\n            <div class=\"item-film-time\">下单时间 : {{ item.order.createAt }}</div>\r\n            <div v-if=\"item.order.status === 2\" class=\"item-film-time\">支付时间 : {{ item.order.payAt }}</div>\r\n          </div>\r\n          <el-button type=\"text\"\r\n                     @click=\"handlePay(item.order, index)\"\r\n                     v-if=\"item.order.status === 0\"\r\n                     style=\"line-height: 75px\"\r\n                     class=\"o1\">\r\n            等待支付\r\n          </el-button>\r\n          <el-tooltip class=\"item\" effect=\"dark\" content=\"请联系工作人员查询您的订单\" placement=\"top\">\r\n            <div v-if=\"item.order.status === 3\" style=\"color: #E6A23C\" class=\"o1\">订单异常</div>\r\n          </el-tooltip>\r\n          <div v-if=\"item.order.status === 2\" style=\"color: #67C23A\" class=\"o1\">支付成功</div>\r\n          <div v-if=\"item.order.status === 1\" style=\"color: #F56C6C\" class=\"o1\">订单超时</div>\r\n          <div class=\"o2\">￥{{ item.order.price }}</div>\r\n        </div>\r\n      </el-card>\r\n    </div>\r\n\r\n    <el-dialog\r\n        title=\"扫码支付\"\r\n        :show-close=\"false\"\r\n        width=\"30%\"\r\n        :visible.sync=\"centerDialogVisible\"\r\n    >\r\n      <div>\r\n        <img class=\"c-img\" src=\"../../assets/img/c.jpeg\" alt=\"\">\r\n      </div>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button type=\"primary\" @click=\"submitPay\">支 付 成 功</el-button>\r\n  </span>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {FindOrderByUser, PayForOrder} from \"@/api/order\";\r\n\r\nexport default {\r\n  name: \"Order\",\r\n\r\n  data() {\r\n    return {\r\n      centerDialogVisible: false,\r\n      loading: false,\r\n      orderList: [],\r\n      payOrderId: '',\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.loadOrder()\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadOrder() {\r\n      this.loading = true\r\n      FindOrderByUser(localStorage.getItem(\"uid\")).then(res => {\r\n        setTimeout(() => {\r\n          this.orderList = res.data\r\n          this.loading = false\r\n        }, 700)\r\n      })\r\n    },\r\n\r\n    handlePay(order, index) {\r\n      this.open(order, index);\r\n    },\r\n\r\n    open(order, index) {\r\n      this.$confirm('请您仔细确认订单金额为' + order.price + '元, 是否继续?', '提示', {\r\n        confirmButtonText: '确认支付',\r\n        cancelButtonText: '取消支付',\r\n        type: 'success',\r\n        center: true\r\n      }).then(() => {\r\n        this.loading = true\r\n        this.centerDialogVisible = true\r\n        this.payOrderId = order.id\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'warning',\r\n          message: '用户已取消支付'\r\n        });\r\n      });\r\n    },\r\n\r\n    submitPay() {\r\n      PayForOrder(this.payOrderId).then(res => {\r\n        this.loadOrder();\r\n        this.centerDialogVisible = false\r\n        if (res.success) {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '恭喜你支付成功!'\r\n          });\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.box-card {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n>>> .el-card__header {\r\n  background: #C0C4CC;\r\n}\r\n\r\n.item-film-img {\r\n  float: left;\r\n  width: 80px;\r\n  height: 100px;\r\n  padding-bottom: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.item-film-name {\r\n  letter-spacing: 2px;\r\n  font-weight: 500;\r\n  font-size: 18px;\r\n  padding-bottom: 15px;\r\n  padding-top: 1px;\r\n}\r\n\r\n.c-img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.item-film-seat {\r\n  letter-spacing: 1px;\r\n  font-size: 12px;\r\n  padding-bottom: 5px;\r\n  padding-left: 10px;\r\n  color: #91949c;\r\n}\r\n\r\n\r\n.item-film-time {\r\n  letter-spacing: 1px;\r\n  font-size: 12px;\r\n  padding-left: 10px;\r\n  padding-bottom: 5px;\r\n  color: #91949c;\r\n}\r\n\r\n.o1 {\r\n  float: right;\r\n  line-height: 100px;\r\n  padding-right: 20px\r\n}\r\n\r\n.o2 {\r\n  font-size: 20px;\r\n  float: right;\r\n  line-height: 100px;\r\n  padding-right: 100px\r\n}\r\n</style>"]}]}